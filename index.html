<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Grippo Admin — Exercise Examples</title>
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="token-input">
      <input id="token" type="password" placeholder="Bearer token (stored locally)" autocomplete="off"/>
    </div>
    <button id="saveToken" class="btn muted" title="Save token to localStorage">Save token</button>
    <button id="loadBtn" class="btn" title="Fetch list from API">Load list</button>
  </header>
<!-- Command bar: sticky below header -->
<div id="commandBar" class="command-bar">
  <input id="search" type="search" placeholder="Search by name…"/>
  <span id="jsonStatus" class="status warn">Waiting…</span>
  <div class="cmd-actions">
    <button id="promptBtn" class="btn" title="Build GPT prompt">Build GPT prompt</button>
    <button id="saveBtn" class="btn" disabled title="Save changes">Save</button>
  </div>
</div>
  <main>
    <!-- Sidebar -->
    <section class="sidebar" aria-label="Examples list">
<div class="side-head">
  <div class="spacer"></div>
  <button id="newBtn" class="btn warn" title="Create new exercise example">New</button>
  <button id="clearSearch" class="btn muted" title="Clear">×</button>
</div>
      <div id="list" class="list" role="listbox" aria-label="Exercise examples list"></div>
    </section>

    <!-- Editor -->
    <section class="panel">
      <div class="ed-head">
  <span id="currentId" class="hint">No item selected</span>
  <span class="spacer"></span>

  <div class="view-toggle">
    <div class="segment" role="tablist" aria-label="Editor mode">
      <button id="viewForm" class="seg active" role="tab" aria-selected="true" title="Form builder">Form</button>
      <button id="viewJson" class="seg" role="tab" aria-selected="false" title="Raw JSON">JSON</button>
    </div>
  </div>

  <button id="formatBtn" class="btn muted json-only" title="Prettify JSON">Format</button>
  <button id="copyEntityBtn" class="btn muted json-only" title="Copy editor JSON">Copy editor JSON</button>
  <button id="copyFullBtn" class="btn muted json-only" title="Copy full item (entity + stats)">Copy full JSON</button>
</div>

      <!-- FORM BUILDER -->
      <div id="builder" class="builder show" aria-label="Exercise Example Builder">
        <!-- Identifier on top -->
        <div class="section">
          <div class="section-title">Identifier</div>
          <div class="field">
            <label for="fId">ID (locked for existing)</label>
            <input id="fId" type="text" disabled placeholder="Auto for new, locked for existing"/>
            <div class="hint">ID cannot be changed for existing items.</div>
          </div>
          <hr class="divider"/>
        </div>

        <!-- Basics -->
        <div class="section">
          <div class="section-title">Basics</div>
          <div class="grid two">
            <div class="field">
              <label for="fName">Name *</label>
              <input id="fName" type="text" placeholder="e.g., Bench Press"/>
            </div>
            <div class="field">
              <label for="fImage">Image URL (optional)</label>
              <input id="fImage" type="url" placeholder="https://..."/>
            </div>
          </div>
          <div class="field">
            <label for="fDescription">Description *</label>
            <textarea id="fDescription" rows="3" placeholder="Short description..."></textarea>
          </div>
          <hr class="divider"/>
        </div>

        <!-- Attributes in two rows -->
        <div class="section">
          <div class="section-title">Attributes</div>

          <div class="grid two">
            <div class="field">
              <label for="fWeightType">Weight type *</label>
              <select id="fWeightType">
                <option value="">— select —</option>
                <option value="free">free</option>
                <option value="fixed">fixed</option>
                <option value="body_weight">body_weight</option>
              </select>
            </div>
            <div class="field">
              <label for="fCategory">Category *</label>
              <select id="fCategory">
                <option value="">— select —</option>
                <option value="compound">compound</option>
                <option value="isolation">isolation</option>
              </select>
            </div>
          </div>

          <div class="grid two">
            <div class="field">
              <label for="fExperience">Experience *</label>
              <select id="fExperience">
                <option value="">— select —</option>
                <option value="beginner">beginner</option>
                <option value="intermediate">intermediate</option>
                <option value="advanced">advanced</option>
                <option value="pro">pro</option>
              </select>
            </div>
            <div class="field">
              <label for="fForceType">Force type *</label>
              <select id="fForceType">
                <option value="">— select —</option>
                <option value="push">push</option>
                <option value="pull">pull</option>
                <option value="hinge">hinge</option>
              </select>
            </div>
          </div>
          <hr class="divider"/>
        </div>

        <!-- Equipment (reorganized: left chips, right single select + add) -->
        <div class="section">
          <div class="section-title">Equipment *</div>

          <div class="grid two">
            <div class="field">
              <label>Selected</label>
              <div id="equipTokens" class="token-list" aria-live="polite"></div>
            </div>

            <div class="field">
              <label for="equipSingle">Add equipment</label>
              <select id="equipSingle"></select>
              <div style="display:flex; gap:8px; margin-top:8px;">
                <button id="equipAdd" class="btn" type="button">Add selected</button>
                <button id="equipClear" class="btn muted" type="button">Clear all</button>
              </div>
            </div>
          </div>

          <hr class="divider"/>
        </div>

        <!-- Muscles -->
        <div class="section">
          <div class="section-title">Muscle bundles (sum must be 100%) *</div>

          <div id="bundles" style="display:grid;gap:8px"></div>

          <div class="bundle-row">
            <select id="muscleSelect"></select>
            <input id="percentInput" type="number" min="0" max="100" step="1" placeholder="%"/>
            <button id="bundleAdd" class="btn" type="button">Add bundle</button>
          </div>
          <div id="bundleSumInfo" class="sum">Sum: 0%</div>
        </div>
      </div>

      <!-- RAW JSON -->
      <textarea id="editor" spellcheck="false" hidden></textarea>
    </section>
  </main>

  <template id="itemTemplate">
    <div class="item" role="option" tabindex="0">
      <div class="name"></div>
      <div class="meta">
        <span class="pill usage"></span>
        <span class="lastUsed"></span>
      </div>
    </div>
  </template>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
